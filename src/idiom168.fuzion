t := if s.endsWith p
       s.substring 0 s.codepointLength-p.codepointLength
     else
       s
